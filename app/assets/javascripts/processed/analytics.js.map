{"version":3,"sources":["app/assets/javascripts/dcmaw/analytics/ga4/init.js","app/assets/javascripts/dcmaw/analytics/ga4/pageLinkClickTracker.js","app/assets/javascripts/dcmaw/analytics/ga4/pageViewTracker.js","app/assets/javascripts/dcmaw/analytics/ua/init.js","app/assets/javascripts/dcmaw/analytics/cookieBanner.js","app/assets/javascripts/dcmaw/analytics/cookies.js","app/assets/javascripts/dcmaw/analytics/core.js","app/assets/javascripts/dcmaw/analytics/loadAnalytics.js","app/assets/javascripts/dcmaw/app/init.js"],"names":["window","DI","analyticsGa4","analytics","init","consentGiven","cookies","hasConsentForAnalytics","core","load","vars","ga4ContainerId","analyticsModules","console","log","JSON","stringify","module","Object","prototype","hasOwnProperty","call","tracker","e","warn","message","location","addEventListener","let","LinkClickTracker","allLinks","document","querySelectorAll","forEach","link","event","preventDefault","data","navigation","language","this","getLanguage","link_text","currentTarget","textContent","trim","toLowerCase","link_url","getAttribute","organisations","primary_publishing_organisation","status_code","title","visualLog","getCookie","PageViewTracker","page_view","href","sendData","analyticsUa","initGtm","dataLayer","gtm.allowlist","gtm.blocklist","gaDataElement","getElementById","sessionJourney","getJourneyMapping","pathname","criJourney","criDataLayer","value","gtag","obj","push","gtm.start","Date","getTime","initLinkerHandlers","submitButton","querySelector","pageForm","ga","gaplugins","getAll","linker","Linker","destinationLink","decorate","action","trackLink","generateSessionJourney","journey","status","sessionjourney","page","cri_type","cri_journey","url","JOURNEY_DATA_LAYER_PATHS","/authorize","/callback","/finishBiometricCheck","/flashingWarning","/validDrivingLicence","/workingCamera","/readyCheck","/downloadApp","/abort","/simpleDevice","uaContainerId","COOKIES_PREFERENCES_SET","cookiesAccepted","cookiesRejected","hideCookieBanner","cookieBannerContainer","cookieBanner","acceptCookies","rejectCookies","cookieBannerInit","domain","setBannerCookieConsent","bind","hideButtons","Array","slice","element","hideElement","hasCookiesPolicy","showElement","analyticsConsent","setCookie","days","CustomEvent","createEvent","initCustomEvent","dispatchEvent","el","style","display","cookieConsent","parse","decodeURIComponent","name","nameEQ","cookie","split","i","len","length","startsWith","substring","values","options","cookieString","encodeURIComponent","date","setTime","toUTCString","protocol","gtmScriptTag","createElement","type","setAttribute","documentElement","firstChild","appendChild","loadAnalytics","content","onload","test","navigator","userAgent","setVoiceOverFocus","focusInterval","focusTotalRepetitions","mainContent","getElementsByTagName","getElementsByClassName","mainElement","blur","focusRepetitions","interval","setInterval","focus","clearInterval","appInit","analyticsCookieDomain","isGa4Enabled","GOVUKFrontend","Cookies","initAnalytics"],"mappings":"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"}